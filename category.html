<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Kategori</title>

<style>
body{font-family:Arial;margin:0;background:#fff1f6}
.wrap{max-width:1100px;margin:auto;padding:20px}
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
.card{background:#fff;border-radius:14px;padding:10px;border:1px solid #eee}
.img{width:100%;height:180px;object-fit:cover;background:#eee}
.btn{width:100%;padding:10px;background:#ff2e88;color:#fff;border:none;border-radius:10px;margin-top:6px}
</style>
</head>

<body>
<div class="wrap">
<h2 id="title"></h2>
<div id="grid" class="grid"></div>
</div>

<script>
const params = new URLSearchParams(location.search);
const catKey = (params.get("category")||"").toLowerCase();
document.getElementById("title").textContent = catKey;

function fixImg(v){
  if(!v) return "images/cam.jpg";
  if(v.startsWith("http")) return v;
  return "images/" + v.replace("images/","").replace("resimler/","");
}

async function getProducts(){
  const res = await fetch("products_with_images_only.json");
  return await res.json();
}

async function render(){
  const grid=document.getElementById("grid");
  const products=await getProducts();

  const list=products.filter(p=>String(p.category).toLowerCase()==catKey);

  grid.innerHTML=list.map(p=>`
    <div class="card">
      <img class="img" src="${fixImg(p.img)}">
      <div>${p.title}</div>
      <div>₺ ${p.price}</div>
      <button class="btn">Ürünü Gör</button>
    </div>
  `).join("");
}

render();
</script>
</body>
</html>