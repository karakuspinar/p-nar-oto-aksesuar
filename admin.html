<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Admin Panel</title>

<style>
body{font-family:Arial;background:#fff1f6;margin:0}
.wrap{max-width:1000px;margin:auto;padding:20px}
.card{background:#fff;padding:20px;border-radius:16px;border:1px solid #ffd1e3}
h1{color:#ff2e88}
.row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
input,select{padding:12px;border-radius:12px;border:1px solid #ffc0d9;width:100%}
button{padding:12px 14px;border:none;border-radius:14px;font-weight:bold;cursor:pointer}
.btn{background:#ff2e88;color:#fff}
.btn2{background:#111;color:#fff}
.list{margin-top:20px}
.item{display:flex;justify-content:space-between;border-top:1px solid #eee;padding:10px 0}
</style>
</head>

<body>
<div class="wrap">
<div class="card">

<h1>Admin • Ürün Ekle</h1>

<div class="row">
<input id="title" placeholder="Başlık">
<select id="category">
<option value="">Kategori</option>
<option value="paspas">Paspas</option>
<option value="tozluk">Tozluk</option>
<option value="cam">Cam</option>
<option value="difuzor">Difüzör</option>
</select>

<input id="img" placeholder="resim.jpg">
<input id="price" placeholder="299">
</div>

<input id="desc" placeholder="Açıklama" style="margin-top:10px">

<div style="margin-top:10px">
<button class="btn" onclick="add()">Kaydet</button>
<button class="btn2" onclick="download()">JSON indir</button>
</div>

<hr>

<h3>Excel (CSV) ile yükle</h3>
<input type="file" id="csv" onchange="csvYukle(event)">

<div class="list" id="list"></div>

</div>
</div>

<script>
const KEY="products";

function get(){return JSON.parse(localStorage.getItem(KEY)||"[]")}
function set(v){localStorage.setItem(KEY,JSON.stringify(v))}

function add(){
let p=get();
p.push({
title:title.value,
category:category.value,
img:img.value,
price:Number(price.value),
desc:desc.value
});
set(p);
render();
alert("Eklendi");
}

function render(){
let p=get();
list.innerHTML=p.map((x,i)=>`
<div class="item">
${x.title} - ${x.price}
<button onclick="sil(${i})">sil</button>
</div>`).join("");
}

function sil(i){
let p=get();
p.splice(i,1);
set(p);
render();
}

function download(){
let data=JSON.stringify(get(),null,2);
let blob=new Blob([data]);
let a=document.createElement("a");
a.href=URL.createObjectURL(blob);
a.download="products.json";
a.click();
}

function csvYukle(e){
let file=e.target.files[0];
let reader=new FileReader();
reader.onload=function(){
let rows=reader.result.split("\n").slice(1);
let p=get();
rows.forEach(r=>{
let c=r.split(",");
if(c.length>2){
p.push({title:c[0],category:c[1],img:c[2],price:c[3],desc:c[4]})
}
});
set(p);
render();
alert("Excel yüklendi");
}
reader.readAsText(file);
}

render();
</script>

</body>
</html>
